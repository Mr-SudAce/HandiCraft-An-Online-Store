{% extends 'base.html' %}

{% block title %}Search {% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <h3 class="page-header">Search Results for <span style="color: var(--warning-color);">"{{request.GET.keyword}}"</span></h3>

            {% for result in results %}
            <div class="card custom-card mb-4">
                <div class="row g-0">
                    <div class="col-md-3 d-flex align-items-center justify-content-center p-3">
                        <img src="{{result.image.url}}" class="img-fluid rounded-start" alt="{{result.title}}" style="max-height: 200px;">
                    </div>
                    <div class="col-md-9">
                        <div class="card-body">
                            <h4 class="card-title">{{result.title}}</h4>
                            <p class="card-text">{{result.description|truncatechars:150}}</p>
                            <div class="mt-3">
                                {% if result.stock_quantity <= 0 %} 
                                    <button class="btn btn-danger-custom" disabled>Out of Stock</button>
                                {% else %}
                                    <a href="{% url 'ecomapp:addtocart' result.id %}" class="btn btn-primary-custom">Add To Cart</a>
                                    <a href="{% url 'ecomapp:productdetail' result.slug %}" class="btn btn-outline-secondary ms-2">View Details</a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

{% endblock %}